<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instant Floor Care Quote</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
        .container { max-width: 400px; margin: auto; padding: 20px; border: 1px solid #ccc; border-radius: 10px; display: flex; flex-direction: column; align-items: center; }
        input, select, button { width: 80%; padding: 10px; margin: 10px 0; display: block; text-align: center; }
        input { max-width: 350px; }

        .confirmationMessage {
            display: none;
            background-color: #4CAF50;
            color: white;
            padding: 10px;
            margin-top: 20px;
            border-radius: 5px;
        }

        .required {
            font-size: 0.8em;
            color: red;
        }
    </style>
</head>
<body>

    <h2>Get an Instant Quote</h2>

    <!-- Main container for quote input form -->
    <div class="container">
        <!-- Zip Code and Square Footage -->
        <label for="zipCode">Enter Your Zip Code: <span class="required">(Required)</span></label>
        <input type="text" id="zipCode" placeholder="Enter zip code" required>

        <br>

        <label for="sqft">Enter Square Footage: <span class="required">(Required)</span></label>
        <input type="number" id="sqft" placeholder="Enter square footage" required>

        <br>

        <label for="floorType">Select Floor Type:</label>
        <select id="floorType">
            <option value="vct">VCT</option>
            <option value="tile">Tile</option>
            <option value="carpet">Carpet</option>
        </select>

        <br>

        <label for="floorCondition">Select Floor Condition:</label>
        <select id="floorCondition">
            <option value="minimal">Minimal dirt/stains</option>
            <option value="some">Some stains/wear</option>
            <option value="deep">Deep stains, high traffic wear</option>
        </select>

        <button type="button" onclick="calculateQuote()">Get Quote</button>

        <h3 id="quoteResult"></h3>
    </div>

    <!-- Contact Info Form -->
    <div class="container">
        <form id="contactForm">
            <label for="name">Name <span class="required">(Required)</span></label>
            <input type="text" id="name" name="name" placeholder="Enter your name" required>

            <label for="phone">Phone Number <span class="required">(Required)</span></label>
            <input type="text" id="phone" name="phone" placeholder="Enter your phone number" required>

            <label for="address">Address <span class="required">(Required)</span></label>
            <input type="text" id="address" name="address" placeholder="Enter your address" required>

            <button type="button" onclick="submitContactInfo()">Submit</button>
        </form>
    </div>

    <!-- Confirmation message -->
    <div class="confirmationMessage" id="confirmationMessage">
        Thank you for submitting your contact info!
    </div>

    <script>
        // Function to calculate the quote
        function calculateQuote() {
            let sqft = document.getElementById("sqft").value;
            let zipCode = document.getElementById("zipCode").value;
            let floorType = document.getElementById("floorType").value;
            let floorCondition = document.getElementById("floorCondition").value;
            
            let pricePerSqFt = { vct: 0.50, tile: 0.40, carpet: 0.35 };
            let conditionMultiplier = { minimal: 1, some: 1.2, deep: 1.5 };
            let zipMultiplier = zipCode.startsWith('103') ? 1 : 1.5;
            
            // Calculate the total cost
            let totalCost = (sqft * pricePerSqFt[floorType] * conditionMultiplier[floorCondition] * zipMultiplier).toFixed(2);

            // Minimum cost check
            if (totalCost < 70) {
                totalCost = 70;
            }

            // Show the calculated quote result
            document.getElementById("quoteResult").innerText = "Estimated Cost: $" + totalCost;
        }

        // Function to submit contact info
        function submitContactInfo() {
            const formElement = document.getElementById("contactForm");

            if (formElement) {
                const formData = new FormData(formElement);
                const data = {};
                formData.forEach((value, key) => { data[key] = value });

                const googleScriptUrl = 'https://script.google.com/macros/s/AKfycbzCZDi9sm4Y2Dg4cjOUChNL9Zg12zIVtmNfBk_Hj4BbAIEXsHm7reFCEmR81Ulvw5JE/exec';

                fetch(googleScriptUrl, {
                    method: 'POST',
                    body: new URLSearchParams(data),
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    }
                })
                .then(response => response.json())
                .then(data => {
                    // Show confirmation message after successful submission
                    document.getElementById('confirmationMessage').style.display = 'block';
                    document.getElementById('quoteResult').innerText = 'Thank you for submitting your contact info!';
                })
                .catch((error) => {
                    console.error('Error submitting data:', error);
                });
            } else {
                console.error("Form element not found.");
            }
        }
    </script>

</body>
</html>
